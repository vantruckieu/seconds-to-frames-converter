<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Studio Timing Converter</title>

<style>
body{
    background:#0f1117;
    font-family:Segoe UI, sans-serif;
    color:#e6e6e6;
    text-align:center;
    padding:40px;
}

.container{
    max-width:700px;
    margin:auto;
    background:#1a1d25;
    padding:30px;
    border-radius:16px;
    box-shadow:0 0 30px rgba(0,0,0,0.6);
}

h1{
    color:#00ffd5;
    margin-bottom:30px;
}

input, select{
    padding:12px;
    margin:10px;
    font-size:16px;
    background:#11131a;
    color:white;
    border:1px solid #333;
    border-radius:8px;
    width:200px;
}

button{
    padding:12px 20px;
    margin:8px;
    font-size:15px;
    background:#00ffd5;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}

button:hover{
    background:#00c2a3;
}

.result{
    margin-top:20px;
    font-size:20px;
    color:#00ffd5;
}

.table{
    margin-top:30px;
    text-align:left;
}

table{
    width:100%;
    border-collapse:collapse;
}

th, td{
    padding:8px;
    border-bottom:1px solid #333;
}

.lang-switch{
    position:absolute;
    top:20px;
    right:20px;
}

</style>
</head>

<body>

<div class="lang-switch">
<select onchange="changeLanguage(this.value)">
<option value="vi">ðŸ‡»ðŸ‡³ VI</option>
<option value="en">ðŸ‡¬ðŸ‡§ EN</option>
</select>
</div>

<div class="container">

<h1 id="title">ðŸŽ¬ Studio Timing Converter</h1>

<div>
<input type="number" id="seconds" placeholder="Seconds">
<input type="number" id="frames" placeholder="Frames">
<input type="text" id="timecode" placeholder="HH:MM:SS">
</div>

<div>
<select id="fps">
<option value="24">24 FPS</option>
<option value="30">30 FPS</option>
<option value="60">60 FPS</option>
</select>

<button onclick="set12fps()" id="quick12">Quick 12 FPS (On 2s)</button>
</div>

<div>
<button onclick="secToFrame()" id="btn1">Seconds â†’ Frames</button>
<button onclick="frameToSec()" id="btn2">Frames â†’ Seconds</button>
<button onclick="timecodeToFrame()" id="btn3">Timecode â†’ Frames</button>
</div>

<div class="result" id="result"></div>

<div class="table">
<h3 id="sheetTitle">Timing Sheet</h3>
<table id="sheet">
<tr>
<th id="th1">Seconds</th>
<th id="th2">Frames</th>
<th id="th3">FPS</th>
</tr>
</table>
<button onclick="exportCSV()" id="exportBtn">Export CSV</button>
</div>

</div>

<script>

let currentLang = "vi";

const translations = {
    vi:{
        title:"ðŸŽ¬ CÃ´ng Cá»¥ TÃ­nh Timing Studio",
        quick12:"Quick 12 FPS (Anime On 2s)",
        btn1:"GiÃ¢y â†’ Frame",
        btn2:"Frame â†’ GiÃ¢y",
        btn3:"Timecode â†’ Frame",
        sheet:"Báº£ng Timing",
        export:"Xuáº¥t CSV"
    },
    en:{
        title:"ðŸŽ¬ Studio Timing Converter",
        quick12:"Quick 12 FPS (On 2s)",
        btn1:"Seconds â†’ Frames",
        btn2:"Frames â†’ Seconds",
        btn3:"Timecode â†’ Frames",
        sheet:"Timing Sheet",
        export:"Export CSV"
    }
};

function changeLanguage(lang){
    currentLang = lang;
    document.getElementById("title").innerText = translations[lang].title;
    document.getElementById("quick12").innerText = translations[lang].quick12;
    document.getElementById("btn1").innerText = translations[lang].btn1;
    document.getElementById("btn2").innerText = translations[lang].btn2;
    document.getElementById("btn3").innerText = translations[lang].btn3;
    document.getElementById("sheetTitle").innerText = translations[lang].sheet;
    document.getElementById("exportBtn").innerText = translations[lang].export;
}

function getFPS(){
    return parseFloat(document.getElementById("fps").value);
}

function set12fps(){
    document.getElementById("fps").value = 24;
    alert(currentLang==="vi" ?
        "Anime On 2s: Má»—i pose giá»¯ 2 frame (12 drawings/sec á»Ÿ 24fps)" :
        "Anime On 2s: Hold each pose for 2 frames (12 drawings/sec at 24fps)"
    );
}

function roundFrame(value){
    return Math.round(value);
}

function secToFrame(){
    let sec = parseFloat(document.getElementById("seconds").value);
    let fps = getFPS();
    if(isNaN(sec)) return;
    let frames = roundFrame(sec * fps);
    document.getElementById("result").innerText =
        currentLang==="vi" ?
        sec + " giÃ¢y = " + frames + " frame" :
        sec + " sec = " + frames + " frames";
    addToSheet(sec, frames, fps);
}

function frameToSec(){
    let frames = parseFloat(document.getElementById("frames").value);
    let fps = getFPS();
    if(isNaN(frames)) return;
    let sec = (frames / fps).toFixed(3);
    document.getElementById("result").innerText =
        currentLang==="vi" ?
        frames + " frame = " + sec + " giÃ¢y" :
        frames + " frames = " + sec + " sec";
    addToSheet(sec, frames, fps);
}

function timecodeToFrame(){
    let tc = document.getElementById("timecode").value;
    let fps = getFPS();
    let parts = tc.split(":");
    if(parts.length !== 3) return;
    let h = parseInt(parts[0]);
    let m = parseInt(parts[1]);
    let s = parseInt(parts[2]);
    let totalSec = h*3600 + m*60 + s;
    let frames = roundFrame(totalSec * fps);
    document.getElementById("result").innerText =
        tc + " = " + frames + " frames";
    addToSheet(totalSec, frames, fps);
}

function addToSheet(sec, frames, fps){
    let table = document.getElementById("sheet");
    let row = table.insertRow(-1);
    row.insertCell(0).innerText = sec;
    row.insertCell(1).innerText = frames;
    row.insertCell(2).innerText = fps;
}

function exportCSV(){
    let rows = document.querySelectorAll("table tr");
    let csv = [];
    for(let i=0;i<rows.length;i++){
        let cols = rows[i].querySelectorAll("td, th");
        let row = [];
        for(let j=0;j<cols.length;j++){
            row.push(cols[j].innerText);
        }
        csv.push(row.join(","));
    }
    let csvFile = new Blob([csv.join("\n")], {type:"text/csv"});
    let downloadLink = document.createElement("a");
    downloadLink.download = "timing_sheet.csv";
    downloadLink.href = window.URL.createObjectURL(csvFile);
    downloadLink.click();
}

</script>

</body>
</html>
